CMake Cheat Sheet

Making the visual studio project (starting in the root)

mkdir build
cd build
cmake ..

Other generators
cmake -G "Visual Studio 15 2017 Win64" ..

Special install directory, for testing installation folder. 
The default on windows is Program Files so for testing don't mess with that
cmake -D CMAKE_INSTALL_PREFIX=install ..

Building (starting in the build directory)
cmake --build .

Building release
cmake --build . --config Release

Installing (equivalent of 'make install' on Linux)
cmake --build . --target INSTALL --config Release

Packaging, default generator is WIX
cmake --build . --config Release
cpack .



-------------


With Visual Studio 2017, this thing is so strange


-------------

With Qt


cmake -D CMAKE_PREFIX_PATH=C:/Qt/5.8/msvc2015 ..


-------------

Altogether

cmake -G "Visual Studio 15 2017 Win64" \
  -D CMAKE_PREFIX_PATH=C:/Qt/5.9.1/msvc2017_64; \
  -D CMAKE_INSTALL_PREFIX=install ..

cmake --build . --target INSTALL --config Release






HOW TO BUILD DEPENDENCIES
use the gui as a guide to fill holes

SRC="T:/Projects/_UCLA/vsim/dependencies-src/"
DEPS="T:/Projects/_UCLA/vsim/vsim-dependencies/"

# building third party
cmake -G "Visual Studio 15 2017 Win64" \
  $SRC/osg-3rdparty-cmake/

cmake \
  -D FREETYPE_SOURCE_DIR=$SRC/freetype-2.7.1 \
  -D GIFLIB_SOURCE_DIR=$SRC/giflib-5.1.4 \
  -D GLUT_SOURCE_DIR=$SRC/glut-3.7 \
  -D LIBJPEG_SOURCE_DIR=$SRC/jpeg-9b \
  -D LIBPNG_SOURCE_DIR=$SRC/lpng1628 \
  -D LIBTIFF_SOURCE_DIR=$SRC/tiff-4.0.4 \
  -D MINIZIP_SOURCE_DIR=$SRC/minizip-master \
  -D ZLIB_SOURCE_DIR=$SRC/zlib-1.2.11 \
  .
#  -D CURL_SOURCE_DIR= \

cmake --build . --config Debug
cmake --build . --config Release
cmake --build . --target INSTALL --config Debug
cmake --build . --target INSTALL --config Release

# building collada3 (TODO in the far future)

# building openscenegraph 

SRC="T:/Projects/_UCLA/vsim/dependencies-src/"
DEPS="T:/Projects/_UCLA/vsim/vsim-dependencies/"

cmake -G "Visual Studio 15 2017 Win64" \
  ../../../dependencies-src/OpenSceneGraph-3.4.0/

cmake -D ACTUAL_3RDPARTY_DIR="$DEPS/3rdParty-build/msvc2017_64/3rdParty/-x64" .

cmake --build . --config Debug
cmake --build . --config Release
cmake --build . --target INSTALL --config Debug
cmake --build . --target INSTALL --config Release